(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7156:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(4984)}])},4984:function(n,e,t){"use strict";t.r(e);var o=t(4051),r=t.n(o),i=t(5893),s=(t(4444),t(5683),t(2659)),c=t(9331),u=t(4940),a=t(974),l=t(214),f=t.n(l),p=t(5678);t(993);function h(n,e,t,o,r,i,s){try{var c=n[i](s),u=c.value}catch(a){return void t(a)}c.done?e(u):Promise.resolve(u).then(o,r)}function g(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var i=n.apply(e,t);function s(n){h(i,o,r,s,c,"next",n)}function c(n){h(i,o,r,s,c,"throw",n)}s(void 0)}))}}var d=function(n){p.Am.success(n,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},m=function(n){p.Am.error(n,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};function _(n){return v.apply(this,arguments)}function v(){return(v=g(r().mark((function n(e){var t,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://localhost:8000/getAllLeaves");case 2:return t=n.sent,n.next=5,t.json();case 5:return o=n.sent,n.abrupt("return",o.leaves);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(){return w.apply(this,arguments)}function w(){return(w=g(r().mark((function n(){var e,t,o,i,s,l,f,p,h,g,v,x,w,y,k,b;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="Make me anonymous",n.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return t=new c.Q(window.ethereum),o=t.getSigner(),n.next=7,o.signMessage(e);case 7:return i=n.sent,n.next=10,o.getAddress();case 10:return n.sent,s=new u.t(u._.MESSAGE,i),l=s.genIdentityCommitment(),n.next=15,_(l);case 15:return f=n.sent,console.log(f),p=(0,a.iZ)(20,0,f,l),h="Login into",BigInt(Math.floor(Math.random()*Math.pow(2,256)+1)),g=a.L3.genWitness(s.getTrapdoor(),s.getNullifier(),p,p.root,h),n.next=23,a.L3.genProof(g,"./semaphore.wasm","./semaphore.zkey");case 23:return v=n.sent,x=v.proof,w=v.publicSignals,y=a.L3.packToSolidityProof(x),p.root.toString(),w.nullifierHash,n.next=31,fetch("http://localhost:8000/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({signedMessage:i,signal:h,root:p.root.toString(),nullifierHash:w.nullifierHash.toString(),externalNullifier:w.externalNullifier.toString(),proof:y})});case 31:return k=n.sent,n.next=34,k.json();case 34:b=n.sent,console.log(b),b.success?d("Redirecting..."):m("Error Occured");case 37:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e.default=function(){return(0,i.jsxs)("div",{className:f().container,style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:"Login with @"})}),(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{variant:"outlined",size:"large",className:"register",onClick:x,children:" Login "})}),(0,i.jsx)(p.Ix,{})]})}},214:function(n){n.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",logs:"Home_logs__xVKJb",button:"Home_button__Zs7A2",title:"Home_title__T09hD",description:"Home_description__41Owk"}},232:function(){},8638:function(){},6601:function(){},9214:function(){},2263:function(){},7790:function(){},5272:function(){},6574:function(){},6184:function(){},1819:function(){},456:function(){},6987:function(){},2361:function(){},4616:function(){},2825:function(){},6567:function(){},9103:function(){},3557:function(){},5683:function(){},4444:function(){}},function(n){n.O(0,[322,639,808,289,974,774,888,179],(function(){return e=7156,n(n.s=e);var e}));var e=n.O();_N_E=e}]);